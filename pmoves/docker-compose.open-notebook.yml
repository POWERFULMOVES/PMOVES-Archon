services:
  open-notebook:
    image: lfnovo/open_notebook:latest-single
    restart: unless-stopped
    env_file:
      - .env
      - .env.local
    environment:
      API_URL: ${OPEN_NOTEBOOK_API_URL:-http://localhost:5055}
      OPEN_NOTEBOOK_PASSWORD: ${OPEN_NOTEBOOK_PASSWORD:-}
      OPEN_NOTEBOOK_API_TOKEN: ${OPEN_NOTEBOOK_API_TOKEN:-}
    ports:
      - "${OPEN_NOTEBOOK_UI_PORT:-8503}:8502"
      - "${OPEN_NOTEBOOK_API_PORT:-5055}:5055"
    volumes:
      - ./data/open-notebook/notebook_data:/app/data
      - ./data/open-notebook/surreal_data:/mydata
    networks:
      - pmoves
networks:
  pmoves:
    external: true
    name: pmoves-net
