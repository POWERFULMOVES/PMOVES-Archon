# PMOVES-Archon Hybrid Standalone Mode Configuration
# Run Archon independently while optionally connecting to PMOVES.AI services

# =============================================================================
# MODE DETECTION
# =============================================================================
# Set to false when running standalone (independent Docker Compose)
# Set to true when running as part of PMOVES.AI docker-compose
DOCKED_MODE=false
PARENT_SYSTEM=PMOVES.AI

# =============================================================================
# TENSORZERO GATEWAY (Optional - for LLM features)
# =============================================================================
# TensorZero Gateway provides centralized LLM orchestration
# Leave empty to use direct OpenAI API or other providers

# Primary TensorZero URL (used in hybrid standalone mode)
TENSORZERO_URL=http://host.docker.internal:3030

# Alternative: Explicit OpenAI-compatible base URL
# TENSORZERO_BASE_URL=http://host.docker.internal:3030/openai/v1

# TensorZero API key (if authentication is enabled)
TENSORZERO_API_KEY=

# Default chat model for Archon agents
TENSORZERO_CHAT_MODEL=qwen2_5_14b

# Default embedding model
TENSORZERO_EMBED_MODEL=text-embedding-3-small

# =============================================================================
# GPU ORCHESTRATOR (Optional - for GPU-intensive workflows)
# =============================================================================
# GPU Orchestrator for distributed GPU resource management
GPU_ORCHESTRATOR_URL=http://host.docker.internal:8090

# =============================================================================
# SUPABASE (Required)
# =============================================================================
# Supabase provides database storage for Archon prompts, forms, and state
# Can use parent PMOVES.AI Supabase or local instance

# Supabase connection (local or parent)
ARCHON_SUPABASE_BASE_URL=http://host.docker.internal:54321
SUPABASE_URL=${ARCHON_SUPABASE_BASE_URL}
SUPABASE_SERVICE_KEY=your-service-key-here
SUPABASE_KEY=${SUPABASE_SERVICE_KEY}

# Postgres direct connection (optional, for some operations)
POSTGRES_HOST=host.docker.internal
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=archon

# =============================================================================
# NATS MESSAGE BUS (Optional - for event coordination)
# =============================================================================
# NATS for async event publishing and agent coordination
NATS_URL=nats://host.docker.internal:4222

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
PORT=8091
HOST=0.0.0.0

# =============================================================================
# OPENAI FALLBACK (Optional - used when TensorZero unavailable)
# =============================================================================
# Direct OpenAI API (fallback when parent TensorZero unreachable)
# OPENAI_API_KEY=sk-...
# OPENAI_API_BASE=https://api.openai.com/v1

# =============================================================================
# NOTES
# =============================================================================
#
# Fully Standalone Mode (No PMOVES.AI):
#   - Set DOCKED_MODE=false
#   - Provide local Supabase instance URL
#   - Provide OPENAI_API_KEY for LLM features
#   - docker compose up -d
#
# Hybrid Mode (With PMOVES.AI services):
#   - Set DOCKED_MODE=false
#   - Keep TENSORZERO_URL=http://host.docker.internal:3030
#   - Keep ARCHON_SUPABASE_BASE_URL=http://host.docker.internal:54321
#   - Ensure PMOVES.AI is running before starting Archon
#   - docker compose up -d
#
# Verify PMOVES.AI connectivity from container:
#   docker exec -it archon-server curl http://host.docker.internal:3030/healthz
#
# For Linux hosts, ensure host.docker.internal works:
#   docker compose --add-host=host.docker.internal:host-gateway up -d
