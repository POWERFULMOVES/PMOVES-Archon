# PMOVES.AI Supabase Environment Configuration
# Based on PMOVES-supabase fork standard variable names
# This file uses STANDARD Supabase variable names (no SUPABASE_* prefixes)
#
# IMPORTANT: These variables follow PMOVES-supabase naming conventions
# which align with upstream Supabase self-hosted standards.

################################################################################
# Secrets - YOU MUST CHANGE THESE BEFORE GOING INTO PRODUCTION
################################################################################

# Database password - MUST CHANGE FOR PRODUCTION
POSTGRES_PASSWORD=bZ9VZ0UoKcTD4aTOJASMrm2vSVd94Ger

# JWT secret for token signing - MUST CHANGE FOR PRODUCTION
# Generate with: openssl rand -base64 32
JWT_SECRET=Mk1YWigx/sFJcP/cN1yTreuIa0maXMekfZ46M5Ewq+s=

# API Keys - Generate new ones for production
# anon key is for public/unauthenticated access
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTc5OTUzNTYwMH0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE

# service_role key has full access - protect carefully
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UtZGVtbyIsImlhdCI6MTY0MTc2OTIwMCwiZXhwIjoxNzk5NTM1NjAwfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q

# Dashboard credentials
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=this_password_is_insecure_and_should_be_updated

# Encryption keys - MUST CHANGE FOR PRODUCTION
SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq
VAULT_ENC_KEY=your-32-character-encryption-key
PG_META_CRYPTO_KEY=your-encryption-key-32-chars-min

################################################################################
# Database Configuration
################################################################################

# Database connection (service name in docker-compose)
POSTGRES_HOST=supabase-db
POSTGRES_DB=pmoves
POSTGRES_PORT=5432

################################################################################
# Auth Configuration (GoTrue)
################################################################################

# General auth settings
SITE_URL=http://localhost:3000
API_EXTERNAL_URL=http://localhost:8000
JWT_EXPIRY=3600
DISABLE_SIGNUP=false
ADDITIONAL_REDIRECT_URLS=

# Email authentication
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=false
ENABLE_ANONYMOUS_USERS=false

# SMTP configuration (for sending emails)
SMTP_ADMIN_EMAIL=admin@example.com
SMTP_HOST=supabase-mail
SMTP_PORT=2500
SMTP_USER=fake_mail_user
SMTP_PASS=fake_mail_password
SMTP_SENDER_NAME=fake_sender

# Mailer URL paths
MAILER_URLPATHS_CONFIRMATION=/auth/v1/verify
MAILER_URLPATHS_INVITE=/auth/v1/verify
MAILER_URLPATHS_RECOVERY=/auth/v1/verify
MAILER_URLPATHS_EMAIL_CHANGE=/auth/v1/verify

# Phone authentication
ENABLE_PHONE_SIGNUP=true
ENABLE_PHONE_AUTOCONFIRM=true

################################################################################
# API Proxy Configuration (Kong)
################################################################################

KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

################################################################################
# PostgREST Configuration
################################################################################

PGRST_DB_SCHEMAS=public,storage,graphql_public

################################################################################
# Studio Configuration
################################################################################

STUDIO_DEFAULT_ORGANIZATION=PMOVES.AI
STUDIO_DEFAULT_PROJECT=Default Project
SUPABASE_PUBLIC_URL=http://localhost:8000

# Image transformation
IMGPROXY_ENABLE_WEBP_DETECTION=true

# OpenAI API key for SQL Editor Assistant
OPENAI_API_KEY=

################################################################################
# Functions Configuration
################################################################################

# VERIFY_JWT applies to all functions
FUNCTIONS_VERIFY_JWT=false

################################################################################
# Analytics/Logs Configuration
################################################################################

# Logflare tokens
LOGFLARE_PUBLIC_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-public
LOGFLARE_PRIVATE_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-private

# Docker socket location for log aggregation
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# Google Cloud Project (for BigQuery analytics backend)
GOOGLE_PROJECT_ID=
GOOGLE_PROJECT_NUMBER=

################################################################################
# Supavisor (Database Pooler) Configuration
################################################################################

# Port for transaction pooling connections
POOLER_PROXY_PORT_TRANSACTION=6543

# Maximum PostgreSQL connections per pool
POOLER_DEFAULT_POOL_SIZE=20

# Maximum client connections per pool
POOLER_MAX_CLIENT_CONN=100

# Unique tenant identifier
POOLER_TENANT_ID=pmoves-tenant

# Pool size for internal metadata storage
POOLER_DB_POOL_SIZE=5

################################################################################
# PMOVES.AI Specific Variables
################################################################################

# PMOVES system context
DOCKED_MODE=true
PARENT_SYSTEM=PMOVES.AI
PARENT_VERSION=1.0.0

# Storage region
SUPABASE_STORAGE_REGION=local

# S3 bucket (if using MinIO for storage backend)
SUPABASE_S3_BUCKET=pmoves-storage

# URI allow list for VPS deployment
SUPABASE_URI_ALLOW_LIST=

# Supabase ports
SUPABASE_DB_PORT=54322
SUPABASE_STORAGE_PORT=5000
SUPABASE_REALTIME_PORT=4000
